package shocky3;

import java.util.LinkedList;
import java.util.List;
import org.bson.types.ObjectId;
import pl.shockah.json.JSONList;
import pl.shockah.json.JSONObject;
import com.mongodb.BasicDBObject;
import com.mongodb.DBCursor;
import com.mongodb.DBObject;

public final class JSONUtil {
	public static DBObject toDBObject(JSONObject j) {
		BasicDBObject bdbo = new BasicDBObject();
		for (String key : j.keys()) bdbo.append(key, j.get(key));
		return bdbo;
	}
	public static JSONObject fromDBObject(DBObject dbo) {
		JSONObject j = new JSONObject();
		for (String key : dbo.keySet()) {
			if (dbo.get(key) instanceof ObjectId) continue;
			System.out.println(key + " -> " + dbo.get(key) + " (" + dbo.get(key).getClass() + ")");
			j.put(key, dbo.get(key));
		}
		return j;
	}
	
	public static DBList toDBList(JSONList<?> j) {
		
	}
	
	public static List<DBObject> all(DBCursor dbc) {
		List<DBObject> list = new LinkedList<>();
		while (dbc.hasNext()) list.add(dbc.next());
		return list;
	}
	
	private JSONUtil() {}
}