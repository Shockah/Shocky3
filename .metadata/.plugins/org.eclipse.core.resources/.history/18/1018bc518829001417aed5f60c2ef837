package shocky3.ident;

import org.pircbotx.User;
import pl.shockah.Box;
import shocky3.BotManager;

public abstract class IdentHandler {
	public final BotManager manager;
	public final String id;
	protected Box<Boolean> available = null;
	
	public IdentHandler(String id) {
		this(null, id);
	}
	public IdentHandler(BotManager manager, String id) {
		this.manager = manager;
		this.id = id;
	}
	
	public final boolean isAvailable() {
		if (available == null) {
			available = new Box<>(checkAvailability());
		}
		return available.value;
	}
	
	public abstract IdentHandler copy(BotManager manager);
	public abstract boolean checkAvailability();
	public abstract String account(BotManager bm, User user);
	public abstract boolean isAccount(BotManager bm, User user, String account);
}