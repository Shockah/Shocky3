package old.old.console.tabs;

import java.util.Collections;
import java.util.Iterator;
import java.util.LinkedList;
import java.util.List;
import old.old.console.ScreenPrinter;
import old.old.console.panels.Panel;
import old.old.console.panels.Splitter;

public class TabOutput extends Tab {
	private LinkedList<String> linesBase = new LinkedList<>();
	public List<String> lines = Collections.synchronizedList(linesBase);
	public StringBuffer sb = new StringBuffer();
	protected int lastWidth, lastHeight;
	
	public TabOutput(String title) {
		super(title);
		panel = new Panel(){
			public void draw(ScreenPrinter sp, Splitter parent) {
				lastWidth = sp.w;
				lastHeight = sp.h;
				
				int yy = sp.y+sp.h-1;
				if (sb.length() > 0) sp.draw(0,yy--,sb.toString());
				
				while (lines.size() > 500) lines.remove(0);
				Iterator<String> it = linesBase.descendingIterator();
				while (it.hasNext()) {
					sp.draw(0,yy--,it.next());
					if (yy < sp.y) break;
				}
			}
		};
	}
	
	public int getLastWidth() {return lastWidth;}
	public int getLastHeight() {return lastHeight;}
}